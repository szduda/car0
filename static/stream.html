<!DOCTYPE html>
<html lang="en">
<head>
    <title>CAR0 Camera Stream</title>
    <meta charset="utf-8">
</head>
<body>

<video id="video" autoplay playsinline muted></video>

<script>
async function start() {
    let pc = new RTCPeerConnection({
        iceServers: [{ urls: ["stun:stun.l.google.com:19302"] }]
    });

    pc.ontrack = (event) => {
        document.getElementById("video").srcObject = event.streams[0];
    };

    // Create offer
    const offer = await pc.createOffer();
    await pc.setLocalDescription(offer);

    // Send offer to Raspberry Pi
    const resp = await fetch("192.168.91.247:5001/offer", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ offer: pc.localDescription })
    });

    const data = await resp.json();
    await pc.setRemoteDescription(data.answer);
}

start();
</script>

</body>
</html>
